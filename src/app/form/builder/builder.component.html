<mat-card>
  <mat-card-content>
    <form [formGroup]="form">
      <div formArrayName="questions">
        <ng-container *ngFor="let q of questions; let i = index">
          <mat-form-field *ngIf="q.type === 'text'">
            <mat-label>{{q.question}}</mat-label>
            <textarea matInput [formControlName]="i"></textarea>
          </mat-form-field>
          <section *ngIf="q.type === 'checkbox'">
            <app-checkbox-question [form]="getFormElem(i)" [question]="q"></app-checkbox-question>
          </section>
        </ng-container>
      </div>
    </form>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button (click)="openAddQuestionDialog()">Add New Question</button>
    <button *ngIf="questionsFormArray.controls.length"
            mat-button
            color="primary"
            [disabled]="form.invalid"
            (click)="submit()"
    >Review my answers</button>
  </mat-card-actions>
</mat-card>
